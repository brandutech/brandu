{"code":"(this[\"webpackJsonpreact-saas-template\"]=this[\"webpackJsonpreact-saas-template\"]||[]).push([[18],{524:function(t,e,i){\"use strict\";var a=i(1),n=i.n(a),o=i(525),r=i.n(o),h=function(){return h=Object.assign||function(t){for(var e,i=1,a=arguments.length;i<a;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},h.apply(this,arguments)};function s(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(null!=t&&\"function\"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(t);n<a.length;n++)e.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(i[a[n]]=t[a[n]])}return i}var c=n.a.forwardRef((function(t,e){var i=s(t,[]),o=i.dragMode,c=void 0===o?\"crop\":o,l=i.src,d=i.style,p=i.className,u=i.crossOrigin,m=i.scaleX,g=i.scaleY,f=i.enable,v=i.zoomTo,w=i.rotateTo,b=i.alt,y=void 0===b?\"picture\":b,x=i.ready,M=i.onInitialized,C=s(i,[\"dragMode\",\"src\",\"style\",\"className\",\"crossOrigin\",\"scaleX\",\"scaleY\",\"enable\",\"zoomTo\",\"rotateTo\",\"alt\",\"ready\",\"onInitialized\"]),D={scaleY:g,scaleX:m,enable:f,zoomTo:v,rotateTo:w},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Object(a.useRef)(null);return n.a.useEffect((function(){t.forEach((function(t){t&&(\"function\"===typeof t?t(i.current):t.current=i.current)}))}),[t]),i}(e,Object(a.useRef)(null));return Object(a.useEffect)((function(){var t;(null===(t=O.current)||void 0===t?void 0:t.cropper)&&\"number\"===typeof v&&O.current.cropper.zoomTo(v)}),[i.zoomTo]),Object(a.useEffect)((function(){var t;(null===(t=O.current)||void 0===t?void 0:t.cropper)&&\"undefined\"!==typeof l&&O.current.cropper.reset().clear().replace(l)}),[l]),Object(a.useEffect)((function(){if(null!==O.current){var t=new r.a(O.current,h(h({dragMode:c},C),{ready:function(t){null!==t.currentTarget&&function(t,e){void 0===e&&(e={});var i=e.enable,a=void 0===i||i,n=e.scaleX,o=void 0===n?1:n,r=e.scaleY,h=void 0===r?1:r,s=e.zoomTo,c=void 0===s?0:s,l=e.rotateTo;a?t.enable():t.disable(),t.scaleX(o),t.scaleY(h),void 0!==l&&t.rotateTo(l),c>0&&t.zoomTo(c)}(t.currentTarget.cropper,D),x&&x(t)}}));M&&M(t)}return function(){var t,e;null===(e=null===(t=O.current)||void 0===t?void 0:t.cropper)||void 0===e||e.destroy()}}),[O]),n.a.createElement(\"div\",{style:d,className:p},n.a.createElement(\"img\",{crossOrigin:u,src:l,alt:y,style:{opacity:0,maxWidth:\"100%\"},ref:O}))}));e.a=c},525:function(t,e,i){t.exports=function(){\"use strict\";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function e(e){for(var i=1;i<arguments.length;i++){var a=null!=arguments[i]?arguments[i]:{};i%2?t(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(t){return i=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i(t)}function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function n(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function h(t){return s(t)||c(t)||l(t)||p()}function s(t){if(Array.isArray(t))return d(t)}function c(t){if(\"undefined\"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}function l(t,e){if(t){if(\"string\"===typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===i&&t.constructor&&(i=t.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(t):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}function p(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var u=\"undefined\"!==typeof window&&\"undefined\"!==typeof window.document,m=u?window:{},g=!(!u||!m.document.documentElement)&&\"ontouchstart\"in m.document.documentElement,f=!!u&&\"PointerEvent\"in m,v=\"cropper\",w=\"all\",b=\"crop\",y=\"move\",x=\"zoom\",M=\"e\",C=\"w\",D=\"s\",O=\"n\",T=\"ne\",B=\"nw\",k=\"se\",E=\"sw\",W=\"\".concat(v,\"-crop\"),N=\"\".concat(v,\"-disabled\"),z=\"\".concat(v,\"-hidden\"),H=\"\".concat(v,\"-hide\"),Y=\"\".concat(v,\"-invisible\"),L=\"\".concat(v,\"-modal\"),X=\"\".concat(v,\"-move\"),R=\"\".concat(v,\"Action\"),j=\"\".concat(v,\"Preview\"),S=\"crop\",A=\"move\",I=\"none\",P=\"crop\",U=\"cropend\",q=\"cropmove\",$=\"cropstart\",Q=\"dblclick\",K=g?\"touchstart\":\"mousedown\",Z=g?\"touchmove\":\"mousemove\",J=g?\"touchend touchcancel\":\"mouseup\",G=f?\"pointerdown\":K,V=f?\"pointermove\":Z,F=f?\"pointerup pointercancel\":J,_=\"ready\",tt=\"resize\",et=\"wheel\",it=\"zoom\",at=\"image/jpeg\",nt=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ot=/^data:/,rt=/^data:image\\/jpeg;base64,/,ht=/^img|canvas$/i,st=200,ct=100,lt={viewMode:0,dragMode:S,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:\"\",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:st,minContainerHeight:ct,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},dt='<div class=\"cropper-container\" touch-action=\"none\"><div class=\"cropper-wrap-box\"><div class=\"cropper-canvas\"></div></div><div class=\"cropper-drag-box\"></div><div class=\"cropper-crop-box\"><span class=\"cropper-view-box\"></span><span class=\"cropper-dashed dashed-h\"></span><span class=\"cropper-dashed dashed-v\"></span><span class=\"cropper-center\"></span><span class=\"cropper-face\"></span><span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span><span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span><span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span><span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span><span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span><span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span><span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span><span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span><span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span><span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span><span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span><span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span></div></div>',pt=Number.isNaN||m.isNaN;function ut(t){return\"number\"===typeof t&&!pt(t)}var mt=function(t){return t>0&&t<1/0};function gt(t){return\"undefined\"===typeof t}function ft(t){return\"object\"===i(t)&&null!==t}var vt=Object.prototype.hasOwnProperty;function wt(t){if(!ft(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&vt.call(i,\"isPrototypeOf\")}catch(a){return!1}}function bt(t){return\"function\"===typeof t}var yt=Array.prototype.slice;function xt(t){return Array.from?Array.from(t):yt.call(t)}function Mt(t,e){return t&&bt(e)&&(Array.isArray(t)||ut(t.length)?xt(t).forEach((function(i,a){e.call(t,i,a,t)})):ft(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var Ct=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];return ft(t)&&i.length>0&&i.forEach((function(e){ft(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},Dt=/\\.\\d*(?:0|9){12}\\d*$/;function Ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Dt.test(t)?Math.round(t*e)/e:t}var Tt=/^width|height|left|top|marginLeft|marginTop$/;function Bt(t,e){var i=t.style;Mt(e,(function(t,e){Tt.test(e)&&ut(t)&&(t=\"\".concat(t,\"px\")),i[e]=t}))}function kt(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Et(t,e){if(e)if(ut(t.length))Mt(t,(function(t){Et(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className=\"\".concat(i,\" \").concat(e)):t.className=e}}function Wt(t,e){e&&(ut(t.length)?Mt(t,(function(t){Wt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,\"\")))}function Nt(t,e,i){e&&(ut(t.length)?Mt(t,(function(t){Nt(t,e,i)})):i?Et(t,e):Wt(t,e))}var zt=/([a-z\\d])([A-Z])/g;function Ht(t){return t.replace(zt,\"$1-$2\").toLowerCase()}function Yt(t,e){return ft(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute(\"data-\".concat(Ht(e)))}function Lt(t,e,i){ft(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute(\"data-\".concat(Ht(e)),i)}function Xt(t,e){if(ft(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute(\"data-\".concat(Ht(e)))}var Rt=/\\s\\s*/,jt=function(){var t=!1;if(u){var e=!1,i=function(){},a=Object.defineProperty({},\"once\",{get:function(){return t=!0,e},set:function(t){e=t}});m.addEventListener(\"test\",i,a),m.removeEventListener(\"test\",i,a)}return t}();function St(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(Rt).forEach((function(e){if(!jt){var o=t.listeners;o&&o[e]&&o[e][i]&&(n=o[e][i],delete o[e][i],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,n,a)}))}function At(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(Rt).forEach((function(e){if(a.once&&!jt){var o=t.listeners,r=void 0===o?{}:o;n=function(){delete r[e][i],t.removeEventListener(e,n,a);for(var o=arguments.length,h=new Array(o),s=0;s<o;s++)h[s]=arguments[s];i.apply(t,h)},r[e]||(r[e]={}),r[e][i]&&t.removeEventListener(e,r[e][i],a),r[e][i]=n,t.listeners=r}t.addEventListener(e,n,a)}))}function It(t,e,i){var a;return bt(Event)&&bt(CustomEvent)?a=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(a=document.createEvent(\"CustomEvent\")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}function Pt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ut=m.location,qt=/^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;function $t(t){var e=t.match(qt);return null!==e&&(e[1]!==Ut.protocol||e[2]!==Ut.hostname||e[3]!==Ut.port)}function Qt(t){var e=\"timestamp=\".concat((new Date).getTime());return t+(-1===t.indexOf(\"?\")?\"?\":\"&\")+e}function Kt(t){var e=t.rotate,i=t.scaleX,a=t.scaleY,n=t.translateX,o=t.translateY,r=[];ut(n)&&0!==n&&r.push(\"translateX(\".concat(n,\"px)\")),ut(o)&&0!==o&&r.push(\"translateY(\".concat(o,\"px)\")),ut(e)&&0!==e&&r.push(\"rotate(\".concat(e,\"deg)\")),ut(i)&&1!==i&&r.push(\"scaleX(\".concat(i,\")\")),ut(a)&&1!==a&&r.push(\"scaleY(\".concat(a,\")\"));var h=r.length?r.join(\" \"):\"none\";return{WebkitTransform:h,msTransform:h,transform:h}}function Zt(t){var i=e({},t),a=0;return Mt(t,(function(t,e){delete i[e],Mt(i,(function(e){var i=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),r=Math.abs(t.endY-e.endY),h=Math.sqrt(i*i+n*n),s=(Math.sqrt(o*o+r*r)-h)/h;Math.abs(s)>Math.abs(a)&&(a=s)}))})),a}function Jt(t,i){var a=t.pageX,n=t.pageY,o={endX:a,endY:n};return i?o:e({startX:a,startY:n},o)}function Gt(t){var e=0,i=0,a=0;return Mt(t,(function(t){var n=t.startX,o=t.startY;e+=n,i+=o,a+=1})),{pageX:e/=a,pageY:i/=a}}function Vt(t){var e=t.aspectRatio,i=t.height,a=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"contain\",o=mt(a),r=mt(i);if(o&&r){var h=i*e;\"contain\"===n&&h>a||\"cover\"===n&&h<a?i=a/e:a=i*e}else o?i=a/e:r&&(a=i*e);return{width:a,height:i}}function Ft(t){var e=t.width,i=t.height,a=t.degree;if(90===(a=Math.abs(a)%180))return{width:i,height:e};var n=a%90*Math.PI/180,o=Math.sin(n),r=Math.cos(n),h=e*r+i*o,s=e*o+i*r;return a>90?{width:s,height:h}:{width:h,height:s}}function _t(t,e,i,a){var n=e.aspectRatio,o=e.naturalWidth,r=e.naturalHeight,s=e.rotate,c=void 0===s?0:s,l=e.scaleX,d=void 0===l?1:l,p=e.scaleY,u=void 0===p?1:p,m=i.aspectRatio,g=i.naturalWidth,f=i.naturalHeight,v=a.fillColor,w=void 0===v?\"transparent\":v,b=a.imageSmoothingEnabled,y=void 0===b||b,x=a.imageSmoothingQuality,M=void 0===x?\"low\":x,C=a.maxWidth,D=void 0===C?1/0:C,O=a.maxHeight,T=void 0===O?1/0:O,B=a.minWidth,k=void 0===B?0:B,E=a.minHeight,W=void 0===E?0:E,N=document.createElement(\"canvas\"),z=N.getContext(\"2d\"),H=Vt({aspectRatio:m,width:D,height:T}),Y=Vt({aspectRatio:m,width:k,height:W},\"cover\"),L=Math.min(H.width,Math.max(Y.width,g)),X=Math.min(H.height,Math.max(Y.height,f)),R=Vt({aspectRatio:n,width:D,height:T}),j=Vt({aspectRatio:n,width:k,height:W},\"cover\"),S=Math.min(R.width,Math.max(j.width,o)),A=Math.min(R.height,Math.max(j.height,r)),I=[-S/2,-A/2,S,A];return N.width=Ot(L),N.height=Ot(X),z.fillStyle=w,z.fillRect(0,0,L,X),z.save(),z.translate(L/2,X/2),z.rotate(c*Math.PI/180),z.scale(d,u),z.imageSmoothingEnabled=y,z.imageSmoothingQuality=M,z.drawImage.apply(z,[t].concat(h(I.map((function(t){return Math.floor(Ot(t))}))))),z.restore(),N}var te=String.fromCharCode;function ee(t,e,i){var a=\"\";i+=e;for(var n=e;n<i;n+=1)a+=te(t.getUint8(n));return a}var ie=/^data:.*,/;function ae(t){var e=t.replace(ie,\"\"),i=atob(e),a=new ArrayBuffer(i.length),n=new Uint8Array(a);return Mt(n,(function(t,e){n[e]=i.charCodeAt(e)})),a}function ne(t,e){for(var i=[],a=8192,n=new Uint8Array(t);n.length>0;)i.push(te.apply(null,xt(n.subarray(0,a)))),n=n.subarray(a);return\"data:\".concat(e,\";base64,\").concat(btoa(i.join(\"\")))}function oe(t){var e,i=new DataView(t);try{var a,n,o;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var r=i.byteLength,h=2;h+1<r;){if(255===i.getUint8(h)&&225===i.getUint8(h+1)){n=h;break}h+=1}if(n){var s=n+10;if(\"Exif\"===ee(i,n+4,4)){var c=i.getUint16(s);if(((a=18761===c)||19789===c)&&42===i.getUint16(s+2,a)){var l=i.getUint32(s+4,a);l>=8&&(o=s+l)}}}if(o){var d,p,u=i.getUint16(o,a);for(p=0;p<u;p+=1)if(d=o+12*p+2,274===i.getUint16(d,a)){d+=8,e=i.getUint16(d,a),i.setUint16(d,1,a);break}}}catch(m){e=1}return e}function re(t){var e=0,i=1,a=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:a=-1;break;case 5:e=90,a=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:a}}var he={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,a=this.cropper,n=Number(e.minContainerWidth),o=Number(e.minContainerHeight);Et(a,z),Wt(t,z);var r={width:Math.max(i.offsetWidth,n>=0?n:st),height:Math.max(i.offsetHeight,o>=0?o:ct)};this.containerData=r,Bt(a,{width:r.width,height:r.height}),Et(t,z),Wt(a,z)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,a=Math.abs(e.rotate)%180===90,n=a?e.naturalHeight:e.naturalWidth,o=a?e.naturalWidth:e.naturalHeight,r=n/o,h=t.width,s=t.height;t.height*r>t.width?3===i?h=t.height*r:s=t.width/r:3===i?s=t.width/r:h=t.height*r;var c={aspectRatio:r,naturalWidth:n,naturalHeight:o,width:h,height:s};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=Ct({},c)},limitCanvas:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=i.viewMode,h=n.aspectRatio,s=this.cropped&&o;if(t){var c=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;r>1?(c=Math.max(c,a.width),l=Math.max(l,a.height),3===r&&(l*h>c?c=l*h:l=c/h)):r>0&&(c?c=Math.max(c,s?o.width:0):l?l=Math.max(l,s?o.height:0):s&&(c=o.width,(l=o.height)*h>c?c=l*h:l=c/h));var d=Vt({aspectRatio:h,width:c,height:l});c=d.width,l=d.height,n.minWidth=c,n.minHeight=l,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(r>(s?0:1)){var p=a.width-n.width,u=a.height-n.height;n.minLeft=Math.min(0,p),n.minTop=Math.min(0,u),n.maxLeft=Math.max(0,p),n.maxTop=Math.max(0,u),s&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===r&&(n.width>=a.width&&(n.minLeft=Math.min(0,p),n.maxLeft=Math.max(0,p)),n.height>=a.height&&(n.minTop=Math.min(0,u),n.maxTop=Math.max(0,u))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=a.width,n.maxTop=a.height},renderCanvas:function(t,e){var i=this.canvasData,a=this.imageData;if(e){var n=Ft({width:a.naturalWidth*Math.abs(a.scaleX||1),height:a.naturalHeight*Math.abs(a.scaleY||1),degree:a.rotate||0}),o=n.width,r=n.height,h=i.width*(o/i.naturalWidth),s=i.height*(r/i.naturalHeight);i.left-=(h-i.width)/2,i.top-=(s-i.height)/2,i.width=h,i.height=s,i.aspectRatio=o/r,i.naturalWidth=o,i.naturalHeight=r,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,Bt(this.canvas,Ct({width:i.width,height:i.height},Kt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,a=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);Ct(i,{width:a,height:n,left:(e.width-a)/2,top:(e.height-n)/2}),Bt(this.image,Ct({width:i.width,height:i.height},Kt(Ct({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,a=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*a),n.height=Math.max(n.minHeight,n.height*a),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=Ct({},n)},limitCropBox:function(t,e){var i=this.options,a=this.containerData,n=this.canvasData,o=this.cropBoxData,r=this.limited,h=i.aspectRatio;if(t){var s=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,l=r?Math.min(a.width,n.width,n.width+n.left,a.width-n.left):a.width,d=r?Math.min(a.height,n.height,n.height+n.top,a.height-n.top):a.height;s=Math.min(s,a.width),c=Math.min(c,a.height),h&&(s&&c?c*h>s?c=s/h:s=c*h:s?c=s/h:c&&(s=c*h),d*h>l?d=l/h:l=d*h),o.minWidth=Math.min(s,l),o.minHeight=Math.min(c,d),o.maxWidth=l,o.maxHeight=d}e&&(r?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(a.width,n.left+n.width)-o.width,o.maxTop=Math.min(a.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=a.width-o.width,o.maxTop=a.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Lt(this.face,R,i.width>=e.width&&i.height>=e.height?y:w),Bt(this.cropBox,Ct({width:i.width,height:i.height},Kt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),It(this.element,P,this.getData())}},se={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,a=e?this.crossOriginUrl:this.url,n=t.alt||\"The image to preview\",o=document.createElement(\"img\");if(e&&(o.crossOrigin=e),o.src=a,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,i){var r=i;\"string\"===typeof i?r=t.ownerDocument.querySelectorAll(i):i.querySelector&&(r=[i]),this.previews=r,Mt(r,(function(t){var i=document.createElement(\"img\");Lt(t,j,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=a,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;\"',t.innerHTML=\"\",t.appendChild(i)}))}},resetPreview:function(){Mt(this.previews,(function(t){var e=Yt(t,j);Bt(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Xt(t,j)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,a=i.width,n=i.height,o=t.width,r=t.height,h=i.left-e.left-t.left,s=i.top-e.top-t.top;this.cropped&&!this.disabled&&(Bt(this.viewBoxImage,Ct({width:o,height:r},Kt(Ct({translateX:-h,translateY:-s},t)))),Mt(this.previews,(function(e){var i=Yt(e,j),c=i.width,l=i.height,d=c,p=l,u=1;a&&(p=n*(u=c/a)),n&&p>l&&(d=a*(u=l/n),p=l),Bt(e,{width:d,height:p}),Bt(e.getElementsByTagName(\"img\")[0],Ct({width:o*u,height:r*u},Kt(Ct({translateX:-h*u,translateY:-s*u},t))))})))}},ce={bind:function(){var t=this.element,e=this.options,i=this.cropper;bt(e.cropstart)&&At(t,$,e.cropstart),bt(e.cropmove)&&At(t,q,e.cropmove),bt(e.cropend)&&At(t,U,e.cropend),bt(e.crop)&&At(t,P,e.crop),bt(e.zoom)&&At(t,it,e.zoom),At(i,G,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&At(i,et,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&At(i,Q,this.onDblclick=this.dblclick.bind(this)),At(t.ownerDocument,V,this.onCropMove=this.cropMove.bind(this)),At(t.ownerDocument,F,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&At(window,tt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;bt(e.cropstart)&&St(t,$,e.cropstart),bt(e.cropmove)&&St(t,q,e.cropmove),bt(e.cropend)&&St(t,U,e.cropend),bt(e.crop)&&St(t,P,e.crop),bt(e.zoom)&&St(t,it,e.zoom),St(i,G,this.onCropStart),e.zoomable&&e.zoomOnWheel&&St(i,et,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&St(i,Q,this.onDblclick),St(t.ownerDocument,V,this.onCropMove),St(t.ownerDocument,F,this.onCropEnd),e.responsive&&St(window,tt,this.onResize)}},le={resize:function(){if(!this.disabled){var t,e,i=this.options,a=this.container,n=this.containerData,o=a.offsetWidth/n.width,r=a.offsetHeight/n.height,h=Math.abs(o-1)>Math.abs(r-1)?o:r;1!==h&&(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(Mt(t,(function(e,i){t[i]=e*h}))),this.setCropBoxData(Mt(e,(function(t,i){e[i]=t*h})))))}},dblclick:function(){this.disabled||this.options.dragMode===I||this.setDragMode(kt(this.dragBox,W)?A:S)},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,a=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?a=t.deltaY>0?1:-1:t.wheelDelta?a=-t.wheelDelta/120:t.detail&&(a=t.detail>0?1:-1),this.zoom(-a*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||(\"mousedown\"===t.type||\"pointerdown\"===t.type&&\"mouse\"===t.pointerType)&&(ut(e)&&1!==e||ut(i)&&0!==i||t.ctrlKey))){var a,n=this.options,o=this.pointers;t.changedTouches?Mt(t.changedTouches,(function(t){o[t.identifier]=Jt(t)})):o[t.pointerId||0]=Jt(t),a=Object.keys(o).length>1&&n.zoomable&&n.zoomOnTouch?x:Yt(t.target,R),nt.test(a)&&!1!==It(this.element,$,{originalEvent:t,action:a})&&(t.preventDefault(),this.action=a,this.cropping=!1,a===b&&(this.cropping=!0,Et(this.dragBox,L)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==It(this.element,q,{originalEvent:t,action:e})&&(t.changedTouches?Mt(t.changedTouches,(function(t){Ct(i[t.identifier]||{},Jt(t,!0))})):Ct(i[t.pointerId||0]||{},Jt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?Mt(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=\"\"),this.cropping&&(this.cropping=!1,Nt(this.dragBox,L,this.cropped&&this.options.modal)),It(this.element,U,{originalEvent:t,action:e}))}}},de={change:function(t){var e,i=this.options,a=this.canvasData,n=this.containerData,o=this.cropBoxData,r=this.pointers,h=this.action,s=i.aspectRatio,c=o.left,l=o.top,d=o.width,p=o.height,u=c+d,m=l+p,g=0,f=0,v=n.width,W=n.height,N=!0;!s&&t.shiftKey&&(s=d&&p?d/p:1),this.limited&&(g=o.minLeft,f=o.minTop,v=g+Math.min(n.width,a.width,a.left+a.width),W=f+Math.min(n.height,a.height,a.top+a.height));var H=r[Object.keys(r)[0]],Y={x:H.endX-H.startX,y:H.endY-H.startY},L=function(t){switch(t){case M:u+Y.x>v&&(Y.x=v-u);break;case C:c+Y.x<g&&(Y.x=g-c);break;case O:l+Y.y<f&&(Y.y=f-l);break;case D:m+Y.y>W&&(Y.y=W-m)}};switch(h){case w:c+=Y.x,l+=Y.y;break;case M:if(Y.x>=0&&(u>=v||s&&(l<=f||m>=W))){N=!1;break}L(M),(d+=Y.x)<0&&(h=C,c-=d=-d),s&&(p=d/s,l+=(o.height-p)/2);break;case O:if(Y.y<=0&&(l<=f||s&&(c<=g||u>=v))){N=!1;break}L(O),p-=Y.y,l+=Y.y,p<0&&(h=D,l-=p=-p),s&&(d=p*s,c+=(o.width-d)/2);break;case C:if(Y.x<=0&&(c<=g||s&&(l<=f||m>=W))){N=!1;break}L(C),d-=Y.x,c+=Y.x,d<0&&(h=M,c-=d=-d),s&&(p=d/s,l+=(o.height-p)/2);break;case D:if(Y.y>=0&&(m>=W||s&&(c<=g||u>=v))){N=!1;break}L(D),(p+=Y.y)<0&&(h=O,l-=p=-p),s&&(d=p*s,c+=(o.width-d)/2);break;case T:if(s){if(Y.y<=0&&(l<=f||u>=v)){N=!1;break}L(O),p-=Y.y,l+=Y.y,d=p*s}else L(O),L(M),Y.x>=0?u<v?d+=Y.x:Y.y<=0&&l<=f&&(N=!1):d+=Y.x,Y.y<=0?l>f&&(p-=Y.y,l+=Y.y):(p-=Y.y,l+=Y.y);d<0&&p<0?(h=E,l-=p=-p,c-=d=-d):d<0?(h=B,c-=d=-d):p<0&&(h=k,l-=p=-p);break;case B:if(s){if(Y.y<=0&&(l<=f||c<=g)){N=!1;break}L(O),p-=Y.y,l+=Y.y,d=p*s,c+=o.width-d}else L(O),L(C),Y.x<=0?c>g?(d-=Y.x,c+=Y.x):Y.y<=0&&l<=f&&(N=!1):(d-=Y.x,c+=Y.x),Y.y<=0?l>f&&(p-=Y.y,l+=Y.y):(p-=Y.y,l+=Y.y);d<0&&p<0?(h=k,l-=p=-p,c-=d=-d):d<0?(h=T,c-=d=-d):p<0&&(h=E,l-=p=-p);break;case E:if(s){if(Y.x<=0&&(c<=g||m>=W)){N=!1;break}L(C),d-=Y.x,c+=Y.x,p=d/s}else L(D),L(C),Y.x<=0?c>g?(d-=Y.x,c+=Y.x):Y.y>=0&&m>=W&&(N=!1):(d-=Y.x,c+=Y.x),Y.y>=0?m<W&&(p+=Y.y):p+=Y.y;d<0&&p<0?(h=T,l-=p=-p,c-=d=-d):d<0?(h=k,c-=d=-d):p<0&&(h=B,l-=p=-p);break;case k:if(s){if(Y.x>=0&&(u>=v||m>=W)){N=!1;break}L(M),p=(d+=Y.x)/s}else L(D),L(M),Y.x>=0?u<v?d+=Y.x:Y.y>=0&&m>=W&&(N=!1):d+=Y.x,Y.y>=0?m<W&&(p+=Y.y):p+=Y.y;d<0&&p<0?(h=B,l-=p=-p,c-=d=-d):d<0?(h=E,c-=d=-d):p<0&&(h=T,l-=p=-p);break;case y:this.move(Y.x,Y.y),N=!1;break;case x:this.zoom(Zt(r),t),N=!1;break;case b:if(!Y.x||!Y.y){N=!1;break}e=Pt(this.cropper),c=H.startX-e.left,l=H.startY-e.top,d=o.minWidth,p=o.minHeight,Y.x>0?h=Y.y>0?k:T:Y.x<0&&(c-=d,h=Y.y>0?E:B),Y.y<0&&(l-=p),this.cropped||(Wt(this.cropBox,z),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}N&&(o.width=d,o.height=p,o.left=c,o.top=l,this.action=h,this.renderCropBox()),Mt(r,(function(t){t.startX=t.endX,t.startY=t.endY}))}},pe={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Et(this.dragBox,L),Wt(this.cropBox,z),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ct({},this.initialImageData),this.canvasData=Ct({},this.initialCanvasData),this.cropBoxData=Ct({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ct(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Wt(this.dragBox,L),Et(this.cropBox,z)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Mt(this.previews,(function(e){e.getElementsByTagName(\"img\")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Wt(this.cropper,N)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Et(this.cropper,N)),this},destroy:function(){var t=this.element;return t[v]?(t[v]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=i.left,n=i.top;return this.moveTo(gt(t)?t:a+Number(t),gt(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(ut(t)&&(i.left=t,a=!0),ut(e)&&(i.top=e,a=!0),a&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var a=this.options,n=this.canvasData,o=n.width,r=n.height,h=n.naturalWidth,s=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&a.zoomable){var c=h*t,l=s*t;if(!1===It(this.element,it,{ratio:t,oldRatio:o/h,originalEvent:i}))return this;if(i){var d=this.pointers,p=Pt(this.cropper),u=d&&Object.keys(d).length?Gt(d):{pageX:i.pageX,pageY:i.pageY};n.left-=(c-o)*((u.pageX-p.left-n.left)/o),n.top-=(l-r)*((u.pageY-p.top-n.top)/r)}else wt(e)&&ut(e.x)&&ut(e.y)?(n.left-=(c-o)*((e.x-n.left)/o),n.top-=(l-r)*((e.y-n.top)/r)):(n.left-=(c-o)/2,n.top-=(l-r)/2);n.width=c,n.height=l,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return ut(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,ut(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(ut(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,a=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(ut(t)&&(i.scaleX=t,a=!0),ut(e)&&(i.scaleY=e,a=!0),a&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,a=this.imageData,n=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-n.left,y:o.top-n.top,width:o.width,height:o.height};var r=a.width/a.naturalWidth;if(Mt(t,(function(e,i){t[i]=e/r})),e){var h=Math.round(t.y+t.height),s=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=s-t.x,t.height=h-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=a.rotate||0),i.scalable&&(t.scaleX=a.scaleX||1,t.scaleY=a.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,a=this.canvasData,n={};if(this.ready&&!this.disabled&&wt(t)){var o=!1;e.rotatable&&ut(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,o=!0),e.scalable&&(ut(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,o=!0),ut(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var r=i.width/i.naturalWidth;ut(t.x)&&(n.left=t.x*r+a.left),ut(t.y)&&(n.top=t.y*r+a.top),ut(t.width)&&(n.width=t.width*r),ut(t.height)&&(n.height=t.height*r),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?Ct({},this.containerData):{}},getImageData:function(){return this.sized?Ct({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&Mt([\"left\",\"top\",\"width\",\"height\",\"naturalWidth\",\"naturalHeight\"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&wt(t)&&(ut(t.left)&&(e.left=t.left),ut(t.top)&&(e.top=t.top),ut(t.width)?(e.width=t.width,e.height=t.width/i):ut(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,a=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&wt(t)&&(ut(t.left)&&(a.left=t.left),ut(t.top)&&(a.top=t.top),ut(t.width)&&t.width!==a.width&&(e=!0,a.width=t.width),ut(t.height)&&t.height!==a.height&&(i=!0,a.height=t.height),n&&(e?a.height=a.width/n:i&&(a.width=a.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=_t(this.image,this.imageData,e,t);if(!this.cropped)return i;var a=this.getData(),n=a.x,o=a.y,r=a.width,s=a.height,c=i.width/Math.floor(e.naturalWidth);1!==c&&(n*=c,o*=c,r*=c,s*=c);var l=r/s,d=Vt({aspectRatio:l,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Vt({aspectRatio:l,width:t.minWidth||0,height:t.minHeight||0},\"cover\"),u=Vt({aspectRatio:l,width:t.width||(1!==c?i.width:r),height:t.height||(1!==c?i.height:s)}),m=u.width,g=u.height;m=Math.min(d.width,Math.max(p.width,m)),g=Math.min(d.height,Math.max(p.height,g));var f=document.createElement(\"canvas\"),v=f.getContext(\"2d\");f.width=Ot(m),f.height=Ot(g),v.fillStyle=t.fillColor||\"transparent\",v.fillRect(0,0,m,g);var w=t.imageSmoothingEnabled,b=void 0===w||w,y=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,y&&(v.imageSmoothingQuality=y);var x,M,C,D,O,T,B=i.width,k=i.height,E=n,W=o;E<=-r||E>B?(E=0,x=0,C=0,O=0):E<=0?(C=-E,E=0,O=x=Math.min(B,r+E)):E<=B&&(C=0,O=x=Math.min(r,B-E)),x<=0||W<=-s||W>k?(W=0,M=0,D=0,T=0):W<=0?(D=-W,W=0,T=M=Math.min(k,s+W)):W<=k&&(D=0,T=M=Math.min(s,k-W));var N=[E,W,x,M];if(O>0&&T>0){var z=m/r;N.push(C*z,D*z,O*z,T*z)}return v.drawImage.apply(v,[i].concat(h(N.map((function(t){return Math.floor(Ot(t))}))))),f},setAspectRatio:function(t){var e=this.options;return this.disabled||gt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,a=this.face;if(this.ready&&!this.disabled){var n=t===S,o=e.movable&&t===A;t=n||o?t:I,e.dragMode=t,Lt(i,R,t),Nt(i,W,n),Nt(i,X,o),e.cropBoxMovable||(Lt(a,R,t),Nt(a,W,n),Nt(a,X,o))}return this}},ue=m.Cropper,me=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,t),!e||!ht.test(e.tagName))throw new Error(\"The first argument is required and must be an <img> or <canvas> element.\");this.element=e,this.options=Ct({},lt,wt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return o(t,[{key:\"init\",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[v]){if(e[v]=this,\"img\"===i){if(this.isImg=!0,t=e.getAttribute(\"src\")||\"\",this.originalUrl=t,!t)return;t=e.src}else\"canvas\"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:\"load\",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,a=this.options;if(a.rotatable||a.scalable||(a.checkOrientation=!1),a.checkOrientation&&window.ArrayBuffer)if(ot.test(t))rt.test(t)?this.read(ae(t)):this.clone();else{var n=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=o,n.onerror=o,n.ontimeout=o,n.onprogress=function(){n.getResponseHeader(\"content-type\")!==at&&n.abort()},n.onload=function(){e.read(n.response)},n.onloadend=function(){e.reloading=!1,e.xhr=null},a.checkCrossOrigin&&$t(t)&&i.crossOrigin&&(t=Qt(t)),n.open(\"GET\",t,!0),n.responseType=\"arraybuffer\",n.withCredentials=\"use-credentials\"===i.crossOrigin,n.send()}else this.clone()}}},{key:\"read\",value:function(t){var e=this.options,i=this.imageData,a=oe(t),n=0,o=1,r=1;if(a>1){this.url=ne(t,at);var h=re(a);n=h.rotate,o=h.scaleX,r=h.scaleY}e.rotatable&&(i.rotate=n),e.scalable&&(i.scaleX=o,i.scaleY=r),this.clone()}},{key:\"clone\",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,a=e;this.options.checkCrossOrigin&&$t(e)&&(i||(i=\"anonymous\"),a=Qt(e)),this.crossOrigin=i,this.crossOriginUrl=a;var n=document.createElement(\"img\");i&&(n.crossOrigin=i),n.src=a||e,n.alt=t.alt||\"The image to crop\",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),Et(n,H),t.parentNode.insertBefore(n,t.nextSibling)}},{key:\"start\",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=m.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(m.navigator.userAgent),a=function(e,i){Ct(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=Ct({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var n=document.createElement(\"img\"),o=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){a(n.width,n.height),i||o.removeChild(n)},n.src=e.src,i||(n.style.cssText=\"left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;\",o.appendChild(n))}else a(e.naturalWidth,e.naturalHeight)}},{key:\"stop\",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:\"build\",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,a=t.parentNode,n=document.createElement(\"div\");n.innerHTML=dt;var o=n.querySelector(\".\".concat(v,\"-container\")),r=o.querySelector(\".\".concat(v,\"-canvas\")),h=o.querySelector(\".\".concat(v,\"-drag-box\")),s=o.querySelector(\".\".concat(v,\"-crop-box\")),c=s.querySelector(\".\".concat(v,\"-face\"));this.container=a,this.cropper=o,this.canvas=r,this.dragBox=h,this.cropBox=s,this.viewBox=o.querySelector(\".\".concat(v,\"-view-box\")),this.face=c,r.appendChild(i),Et(t,z),a.insertBefore(o,t.nextSibling),this.isImg||Wt(i,H),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Et(s,z),e.guides||Et(s.getElementsByClassName(\"\".concat(v,\"-dashed\")),z),e.center||Et(s.getElementsByClassName(\"\".concat(v,\"-center\")),z),e.background&&Et(o,\"\".concat(v,\"-bg\")),e.highlight||Et(c,Y),e.cropBoxMovable&&(Et(c,X),Lt(c,R,w)),e.cropBoxResizable||(Et(s.getElementsByClassName(\"\".concat(v,\"-line\")),z),Et(s.getElementsByClassName(\"\".concat(v,\"-point\")),z)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),bt(e.ready)&&At(t,_,e.ready,{once:!0}),It(t,_)}}},{key:\"unbuild\",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Wt(this.element,z))}},{key:\"uncreate\",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:\"noConflict\",value:function(){return window.Cropper=ue,t}},{key:\"setDefaults\",value:function(t){Ct(lt,wt(t)&&t)}}]),t}();return Ct(me.prototype,he,se,ce,le,de,pe),me}()}}]);","name":"static/js/18.0fc96213.chunk.js","map":{"version":3,"sources":["static/js/18.0fc96213.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","cropperjs__WEBPACK_IMPORTED_MODULE_1__","cropperjs__WEBPACK_IMPORTED_MODULE_1___default","_assign","Object","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","ReactCropper","a","forwardRef","_a","ref","props","_b","dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","_c","alt","_ready","ready","onInitialized","rest","defaultOptions","combinedRef","refs","_i","targetRef","useEffect","forEach","current","useCombinedRefs","cropper","reset","clear","replace","currentTarget","options","_d","disable","undefined","applyDefaultOptions","destroy","createElement","opacity","maxWidth","exports","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread2","target","source","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","value","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","o","minLen","toString","slice","name","test","len","arr2","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","concat","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","MIN_CONTAINER_WIDTH","MIN_CONTAINER_HEIGHT","DEFAULTS","viewMode","initialAspectRatio","NaN","aspectRatio","data","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","cropstart","cropmove","cropend","crop","zoom","TEMPLATE","isNaN","Number","isNumber","isPositiveNumber","Infinity","isUndefined","isObject","isPlainObject","_constructor","error","isFunction","toArray","callback","_len","args","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","Math","round","REGEXP_SUFFIX","setStyle","element","styles","property","hasClass","classList","contains","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","getData","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","maxRatio","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","ratio","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","getAdjustedSizes","_ref4","height","width","isValidWidth","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","drawImage","map","param","floor","fromCharCode","String","getStringFromCharCode","dataView","start","str","getUint8","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","chunkSize","subarray","btoa","resetAndGetOrientation","orientation","DataView","littleEndian","app1Start","ifdStart","byteLength","offset","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_offset","_length","setUint16","parseOrientation","render","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","limited","limitCanvas","oldLeft","oldTop","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOriginUrl","viewBox","appendChild","viewBoxImage","previews","ownerDocument","querySelectorAll","querySelector","el","img","html","innerHTML","cssText","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","getElementsByTagName","events","bind","onCropStart","cropStart","onWheel","wheel","passive","capture","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","ratioX","ratioY","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","dragBox","_this","delta","preventDefault","wheeling","setTimeout","deltaY","wheelDelta","buttons","button","pointerType","ctrlKey","action","changedTouches","touch","identifier","originalEvent","cropping","change","right","bottom","renderable","shiftKey","range","x","y","check","side","move","methods","initialImageData","hasSameSize","isImg","replaced","uncreate","load","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","pivot","oldRatio","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","sourceWidth","sourceHeight","srcX","srcY","setAspectRatio","mode","croppable","AnotherCropper","Cropper","tagName","Error","reloading","sizing","init","toDataURL","read","clone","xhr","XMLHttpRequest","onabort","onerror","ontimeout","onprogress","getResponseHeader","abort","onload","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","parentNode","insertBefore","nextSibling","_this2","isIOSWebKit","navigator","userAgent","done","build","sizingImage","body","removeChild","template","getElementsByClassName","unbuild","factory"],"mappings":"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"},"input":"(this[\"webpackJsonpreact-saas-template\"] = this[\"webpackJsonpreact-saas-template\"] || []).push([[18],{\n\n/***/ 524:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export Cropper */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var cropperjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(525);\n/* harmony import */ var cropperjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cropperjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar applyDefaultOptions = function applyDefaultOptions(cropper, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _a = options.enable,\n      enable = _a === void 0 ? true : _a,\n      _b = options.scaleX,\n      scaleX = _b === void 0 ? 1 : _b,\n      _c = options.scaleY,\n      scaleY = _c === void 0 ? 1 : _c,\n      _d = options.zoomTo,\n      zoomTo = _d === void 0 ? 0 : _d,\n      rotateTo = options.rotateTo;\n  enable ? cropper.enable() : cropper.disable();\n  cropper.scaleX(scaleX);\n  cropper.scaleY(scaleY);\n  rotateTo !== undefined && cropper.rotateTo(rotateTo);\n  zoomTo > 0 && cropper.zoomTo(zoomTo);\n};\n/**\r\n * sourced from: https://itnext.io/reusing-the-ref-from-forwardref-with-react-hooks-4ce9df693dd\r\n */\n\n\nvar useCombinedRefs = function useCombinedRefs() {\n  var refs = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    refs[_i] = arguments[_i];\n  }\n\n  var targetRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  react__WEBPACK_IMPORTED_MODULE_0___default.a.useEffect(function () {\n    refs.forEach(function (ref) {\n      if (!ref) return;\n\n      if (typeof ref === 'function') {\n        ref(targetRef.current);\n      } else {\n        ref.current = targetRef.current;\n      }\n    });\n  }, [refs]);\n  return targetRef;\n};\n\nvar ReactCropper = react__WEBPACK_IMPORTED_MODULE_0___default.a.forwardRef(function (_a, ref) {\n  var props = __rest(_a, []);\n\n  var _b = props.dragMode,\n      dragMode = _b === void 0 ? 'crop' : _b,\n      src = props.src,\n      style = props.style,\n      className = props.className,\n      crossOrigin = props.crossOrigin,\n      scaleX = props.scaleX,\n      scaleY = props.scaleY,\n      enable = props.enable,\n      zoomTo = props.zoomTo,\n      rotateTo = props.rotateTo,\n      _c = props.alt,\n      alt = _c === void 0 ? 'picture' : _c,\n      _ready = props.ready,\n      onInitialized = props.onInitialized,\n      rest = __rest(props, [\"dragMode\", \"src\", \"style\", \"className\", \"crossOrigin\", \"scaleX\", \"scaleY\", \"enable\", \"zoomTo\", \"rotateTo\", \"alt\", \"ready\", \"onInitialized\"]);\n\n  var defaultOptions = {\n    scaleY: scaleY,\n    scaleX: scaleX,\n    enable: enable,\n    zoomTo: zoomTo,\n    rotateTo: rotateTo\n  };\n  var innerRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n  var combinedRef = useCombinedRefs(ref, innerRef);\n  /**\r\n   * Invoke zoomTo method when cropper is set and zoomTo prop changes\r\n   */\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    var _a;\n\n    if (((_a = combinedRef.current) === null || _a === void 0 ? void 0 : _a.cropper) && typeof zoomTo === 'number') {\n      combinedRef.current.cropper.zoomTo(zoomTo);\n    }\n  }, [props.zoomTo]);\n  /**\r\n   * re-render when src changes\r\n   */\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    var _a;\n\n    if (((_a = combinedRef.current) === null || _a === void 0 ? void 0 : _a.cropper) && typeof src !== 'undefined') {\n      combinedRef.current.cropper.reset().clear().replace(src);\n    }\n  }, [src]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    if (combinedRef.current !== null) {\n      var cropper = new cropperjs__WEBPACK_IMPORTED_MODULE_1___default.a(combinedRef.current, _assign(_assign({\n        dragMode: dragMode\n      }, rest), {\n        ready: function ready(e) {\n          if (e.currentTarget !== null) {\n            applyDefaultOptions(e.currentTarget.cropper, defaultOptions);\n          }\n\n          _ready && _ready(e);\n        }\n      }));\n      onInitialized && onInitialized(cropper);\n    }\n    /**\r\n     * destroy cropper on un-mount\r\n     */\n\n\n    return function () {\n      var _a, _b;\n\n      (_b = (_a = combinedRef.current) === null || _a === void 0 ? void 0 : _a.cropper) === null || _b === void 0 ? void 0 : _b.destroy();\n    };\n  }, [combinedRef]);\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"div\", {\n    style: style,\n    className: className\n  }, react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"img\", {\n    crossOrigin: crossOrigin,\n    src: src,\n    alt: alt,\n    style: {\n      opacity: 0,\n      maxWidth: '100%'\n    },\n    ref: combinedRef\n  }));\n});\n/* harmony default export */ __webpack_exports__[\"a\"] = (ReactCropper);\n\n\n/***/ }),\n\n/***/ 525:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:17.411Z\n */\n(function (global, factory) {\n   true ? module.exports = factory() : undefined;\n})(this, function () {\n  'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n            // 8 is the offset of the current tag's value\n            _offset += 8; // Get the original orientation value\n\n            orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180°\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90°\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90°\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90°\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90°\n\n      case 8:\n        rotate = -90;\n        break;\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY; // Resize when width changed or height changed\n\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"https://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        } // The third parameter is required for avoiding side-effect (#682)\n\n\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n  return Cropper;\n});\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/francocastromiranda/dubai/teste/brandu/node_modules/react-cropper/dist/react-cropper.es.js","/Users/francocastromiranda/dubai/teste/brandu/node_modules/cropperjs/dist/cropper.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","applyDefaultOptions","cropper","options","_a","enable","_b","scaleX","_c","scaleY","_d","zoomTo","rotateTo","disable","undefined","useCombinedRefs","refs","_i","targetRef","useRef","React","useEffect","forEach","ref","current","ReactCropper","forwardRef","props","dragMode","src","style","className","crossOrigin","alt","ready","onInitialized","rest","defaultOptions","innerRef","combinedRef","reset","clear","replace","Cropper","currentTarget","destroy","createElement","opacity","maxWidth","global","factory","module","exports","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread2","target","source","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","value","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","Array","isArray","_arrayLikeToArray","iter","from","o","minLen","toString","slice","name","test","len","arr2","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_ALL","ACTION_CROP","ACTION_MOVE","ACTION_ZOOM","ACTION_EAST","ACTION_WEST","ACTION_SOUTH","ACTION_NORTH","ACTION_NORTH_EAST","ACTION_NORTH_WEST","ACTION_SOUTH_EAST","ACTION_SOUTH_WEST","CLASS_CROP","concat","CLASS_DISABLED","CLASS_HIDDEN","CLASS_HIDE","CLASS_INVISIBLE","CLASS_MODAL","CLASS_MOVE","DATA_ACTION","DATA_PREVIEW","DRAG_MODE_CROP","DRAG_MODE_MOVE","DRAG_MODE_NONE","EVENT_CROP","EVENT_CROP_END","EVENT_CROP_MOVE","EVENT_CROP_START","EVENT_DBLCLICK","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_WHEEL","EVENT_ZOOM","MIME_TYPE_JPEG","REGEXP_ACTIONS","REGEXP_DATA_URL","REGEXP_DATA_URL_JPEG","REGEXP_TAG_NAME","MIN_CONTAINER_WIDTH","MIN_CONTAINER_HEIGHT","DEFAULTS","viewMode","initialAspectRatio","NaN","aspectRatio","data","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRatio","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","minContainerWidth","minContainerHeight","cropstart","cropmove","cropend","crop","zoom","TEMPLATE","isNaN","Number","isNumber","isPositiveNumber","Infinity","isUndefined","isObject","isPlainObject","_constructor","error","isFunction","toArray","callback","_len","args","_key","arg","REGEXP_DECIMALS","normalizeDecimalNumber","times","Math","round","REGEXP_SUFFIX","setStyle","element","styles","property","hasClass","classList","contains","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_CAMEL_CASE","toParamCase","toLowerCase","getData","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","onceSupported","supported","once","listener","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","detail","bubbles","cancelable","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","location","REGEXP_ORIGINS","isCrossOriginURL","url","parts","match","protocol","hostname","port","addTimestamp","timestamp","Date","getTime","getTransforms","_ref","rotate","translateX","translateY","values","transform","join","WebkitTransform","msTransform","getMaxZoomRatio","pointers","pointers2","maxRatio","pointer","pointerId","pointer2","x1","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","getPointer","_ref2","endOnly","pageX","pageY","end","getPointersCenter","count","_ref3","getAdjustedSizes","_ref4","height","width","isValidWidth","isValidHeight","adjustedWidth","getRotatedSizes","_ref5","degree","arc","PI","sinArc","sin","cosArc","cos","newWidth","newHeight","getSourceCanvas","image","_ref6","_ref7","_ref8","imageAspectRatio","imageNaturalWidth","naturalWidth","imageNaturalHeight","naturalHeight","_ref6$rotate","_ref6$scaleX","_ref6$scaleY","_ref8$fillColor","fillColor","_ref8$imageSmoothingE","imageSmoothingEnabled","_ref8$imageSmoothingQ","imageSmoothingQuality","_ref8$maxWidth","_ref8$maxHeight","maxHeight","_ref8$minWidth","minWidth","_ref8$minHeight","minHeight","canvas","context","getContext","maxSizes","minSizes","min","max","destMaxSizes","destMinSizes","destWidth","destHeight","params","fillStyle","fillRect","save","translate","scale","drawImage","map","param","floor","fromCharCode","String","getStringFromCharCode","dataView","start","str","getUint8","REGEXP_DATA_URL_HEAD","dataURLToArrayBuffer","dataURL","base64","binary","atob","arrayBuffer","ArrayBuffer","uint8","Uint8Array","charCodeAt","arrayBufferToDataURL","mimeType","chunks","chunkSize","subarray","btoa","resetAndGetOrientation","DataView","orientation","littleEndian","app1Start","ifdStart","byteLength","offset","exifIDCode","tiffOffset","endianness","getUint16","firstIFDOffset","getUint32","_length","_offset","setUint16","parseOrientation","render","initContainer","initCanvas","initCropBox","renderCanvas","cropped","renderCropBox","container","containerData","offsetWidth","offsetHeight","imageData","rotated","canvasWidth","canvasHeight","canvasData","limited","limitCanvas","oldLeft","oldTop","initialCanvasData","sizeLimited","positionLimited","cropBoxData","_getAdjustedSizes","newCanvasLeft","newCanvasTop","minLeft","minTop","maxLeft","maxTop","changed","transformed","_getRotatedSizes","renderImage","limitCropBox","output","initialCropBoxData","maxCropBoxWidth","maxCropBoxHeight","face","cropBox","disabled","initPreview","crossOriginUrl","viewBox","appendChild","viewBoxImage","previews","ownerDocument","querySelectorAll","querySelector","el","img","html","innerHTML","cssText","resetPreview","cropBoxWidth","cropBoxHeight","originalWidth","originalHeight","getElementsByTagName","events","bind","onCropStart","cropStart","onWheel","wheel","passive","capture","onDblclick","dblclick","onCropMove","cropMove","onCropEnd","cropEnd","onResize","resize","unbind","handlers","ratioX","ratioY","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","setDragMode","dragBox","_this","delta","preventDefault","wheeling","setTimeout","deltaY","wheelDelta","buttons","button","pointerType","ctrlKey","action","changedTouches","touch","identifier","originalEvent","cropping","change","right","bottom","renderable","shiftKey","range","x","y","check","side","move","methods","initialImageData","hasSameSize","isImg","replaced","uncreate","load","originalUrl","offsetX","offsetY","_this$canvasData","moveTo","_originalEvent","pivot","oldRatio","_scaleX","_scaleY","rounded","getContainerData","getImageData","sized","widthChanged","heightChanged","getCroppedCanvas","HTMLCanvasElement","_this$getData","initialX","initialY","initialWidth","initialHeight","_options$imageSmoothi","sourceWidth","sourceHeight","srcX","srcY","srcWidth","srcHeight","dstX","dstY","dstWidth","dstHeight","setAspectRatio","mode","croppable","AnotherCropper","tagName","Error","reloading","sizing","init","toDataURL","clone","read","xhr","XMLHttpRequest","onabort","onerror","ontimeout","onprogress","getResponseHeader","abort","onload","response","onloadend","open","responseType","withCredentials","send","_parseOrientation","stop","parentNode","insertBefore","nextSibling","_this2","isIOSWebKit","navigator","userAgent","done","build","sizingImage","body","removeChild","template","getElementsByClassName","unbuild","noConflict","setDefaults"],"mappings":"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","file":"x","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport Cropper from 'cropperjs';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nvar applyDefaultOptions = function (cropper, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var _a = options.enable, enable = _a === void 0 ? true : _a, _b = options.scaleX, scaleX = _b === void 0 ? 1 : _b, _c = options.scaleY, scaleY = _c === void 0 ? 1 : _c, _d = options.zoomTo, zoomTo = _d === void 0 ? 0 : _d, rotateTo = options.rotateTo;\r\n    enable ? cropper.enable() : cropper.disable();\r\n    cropper.scaleX(scaleX);\r\n    cropper.scaleY(scaleY);\r\n    rotateTo !== undefined && cropper.rotateTo(rotateTo);\r\n    zoomTo > 0 && cropper.zoomTo(zoomTo);\r\n};\r\n/**\r\n * sourced from: https://itnext.io/reusing-the-ref-from-forwardref-with-react-hooks-4ce9df693dd\r\n */\r\nvar useCombinedRefs = function () {\r\n    var refs = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        refs[_i] = arguments[_i];\r\n    }\r\n    var targetRef = useRef(null);\r\n    React.useEffect(function () {\r\n        refs.forEach(function (ref) {\r\n            if (!ref)\r\n                return;\r\n            if (typeof ref === 'function') {\r\n                ref(targetRef.current);\r\n            }\r\n            else {\r\n                ref.current = targetRef.current;\r\n            }\r\n        });\r\n    }, [refs]);\r\n    return targetRef;\r\n};\r\nvar ReactCropper = React.forwardRef(function (_a, ref) {\r\n    var props = __rest(_a, []);\r\n    var _b = props.dragMode, dragMode = _b === void 0 ? 'crop' : _b, src = props.src, style = props.style, className = props.className, crossOrigin = props.crossOrigin, scaleX = props.scaleX, scaleY = props.scaleY, enable = props.enable, zoomTo = props.zoomTo, rotateTo = props.rotateTo, _c = props.alt, alt = _c === void 0 ? 'picture' : _c, ready = props.ready, onInitialized = props.onInitialized, rest = __rest(props, [\"dragMode\", \"src\", \"style\", \"className\", \"crossOrigin\", \"scaleX\", \"scaleY\", \"enable\", \"zoomTo\", \"rotateTo\", \"alt\", \"ready\", \"onInitialized\"]);\r\n    var defaultOptions = { scaleY: scaleY, scaleX: scaleX, enable: enable, zoomTo: zoomTo, rotateTo: rotateTo };\r\n    var innerRef = useRef(null);\r\n    var combinedRef = useCombinedRefs(ref, innerRef);\r\n    /**\r\n     * Invoke zoomTo method when cropper is set and zoomTo prop changes\r\n     */\r\n    useEffect(function () {\r\n        var _a;\r\n        if (((_a = combinedRef.current) === null || _a === void 0 ? void 0 : _a.cropper) && typeof zoomTo === 'number') {\r\n            combinedRef.current.cropper.zoomTo(zoomTo);\r\n        }\r\n    }, [props.zoomTo]);\r\n    /**\r\n     * re-render when src changes\r\n     */\r\n    useEffect(function () {\r\n        var _a;\r\n        if (((_a = combinedRef.current) === null || _a === void 0 ? void 0 : _a.cropper) && typeof src !== 'undefined') {\r\n            combinedRef.current.cropper.reset().clear().replace(src);\r\n        }\r\n    }, [src]);\r\n    useEffect(function () {\r\n        if (combinedRef.current !== null) {\r\n            var cropper = new Cropper(combinedRef.current, __assign(__assign({ dragMode: dragMode }, rest), { ready: function (e) {\r\n                    if (e.currentTarget !== null) {\r\n                        applyDefaultOptions(e.currentTarget.cropper, defaultOptions);\r\n                    }\r\n                    ready && ready(e);\r\n                } }));\r\n            onInitialized && onInitialized(cropper);\r\n        }\r\n        /**\r\n         * destroy cropper on un-mount\r\n         */\r\n        return function () {\r\n            var _a, _b;\r\n            (_b = (_a = combinedRef.current) === null || _a === void 0 ? void 0 : _a.cropper) === null || _b === void 0 ? void 0 : _b.destroy();\r\n        };\r\n    }, [combinedRef]);\r\n    return (React.createElement(\"div\", { style: style, className: className },\r\n        React.createElement(\"img\", { crossOrigin: crossOrigin, src: src, alt: alt, style: { opacity: 0, maxWidth: '100%' }, ref: combinedRef })));\r\n});\n\nexport default ReactCropper;\nexport { ReactCropper as Cropper };\n","/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:17.411Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n}(this, (function () { 'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper'; // Actions\n\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw'; // Classes\n\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\"); // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\"); // Drag modes\n\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none'; // Events\n\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom'; // Mime types\n\n  var MIME_TYPE_JPEG = 'image/jpeg'; // RegExps\n\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i; // Misc\n  // Inspired by the default width and height of a canvas element.\n\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          toArray(data).forEach(function (value, key) {\n            callback.call(data, value, key, data);\n          });\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n\n  function getAdjustedSizes(_ref4) // or 'cover'\n  {\n    var aspectRatio = _ref4.aspectRatio,\n        height = _ref4.height,\n        width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n        height = _ref5.height,\n        degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n        imageNaturalWidth = _ref6.naturalWidth,\n        imageNaturalHeight = _ref6.naturalHeight,\n        _ref6$rotate = _ref6.rotate,\n        rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n        _ref6$scaleX = _ref6.scaleX,\n        scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n        _ref6$scaleY = _ref6.scaleY,\n        scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n        naturalWidth = _ref7.naturalWidth,\n        naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n        fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n        _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n        imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n        _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n        imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n        _ref8$maxWidth = _ref8.maxWidth,\n        maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n        _ref8$maxHeight = _ref8.maxHeight,\n        maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n        _ref8$minWidth = _ref8.minWidth,\n        minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n        _ref8$minHeight = _ref8.minHeight,\n        minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight)); // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = []; // Chunk Typed Array for better performance (#435)\n\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation; // Ignores range error when the image does not have correct Exif information\n\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart; // Only handle JPEG image (start by 0xFFD8)\n\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n\n          offset += 1;\n        }\n      }\n\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n\n          if (littleEndian || endianness === 0x4D4D\n          /* bigEndian */\n          ) {\n              if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n                var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n\n                if (firstIFDOffset >= 0x00000008) {\n                  ifdStart = tiffOffset + firstIFDOffset;\n                }\n              }\n            }\n        }\n      }\n\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n\n        var _offset;\n\n        var i;\n\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112\n          /* Orientation */\n          ) {\n              // 8 is the offset of the current tag's value\n              _offset += 8; // Get the original orientation value\n\n              orientation = dataView.getUint16(_offset, littleEndian); // Override the orientation with its default value\n\n              dataView.setUint16(_offset, 1, littleEndian);\n              break;\n            }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n\n    return orientation;\n  }\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n      // Rotate left 180°\n\n      case 3:\n        rotate = -180;\n        break;\n      // Flip vertical\n\n      case 4:\n        scaleY = -1;\n        break;\n      // Flip vertical and rotate right 90°\n\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n      // Rotate right 90°\n\n      case 6:\n        rotate = 90;\n        break;\n      // Flip horizontal and rotate right 90°\n\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n      // Rotate left 90°\n\n      case 8:\n        rotate = -90;\n        break;\n    }\n\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n          options = this.options,\n          container = this.container,\n          cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n          imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n          width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n          height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n          degree: imageData.rotate || 0\n        }),\n            naturalWidth = _getRotatedSizes.width,\n            naturalHeight = _getRotatedSizes.height;\n\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n          imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true); // Initialize auto crop area\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight); // The width/height of auto crop area must large than \"minWidth/Height\"\n\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n          containerData = this.containerData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData,\n          limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height; // The min/maxCropBoxWidth/Height must be less than container's width/height\n\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        } // The minWidth/Height must be less than maxWidth/Height\n\n\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData;\n\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n          crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n\n      if (!preview) {\n        return;\n      }\n\n      var previews = preview;\n\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img'); // Save the original size for recover\n\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n\n        img.src = url;\n        img.alt = alt;\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n          cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n          height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n          options = this.options,\n          cropper = this.cropper;\n\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n\n      var options = this.options,\n          container = this.container,\n          containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY; // Resize when width changed or height changed\n\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n\n        this.render();\n\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n\n      if (this.disabled) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast (#21)\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (this.disabled // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n\n      var options = this.options,\n          pointers = this.pointers;\n      var action;\n\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      } // This line is required for preventing page zooming in iOS browsers\n\n\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n\n      if (this.disabled || !action) {\n        return;\n      }\n\n      var pointers = this.pointers;\n      event.preventDefault();\n\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n\n      var action = this.action,\n          pointers = this.pointers;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n          canvasData = this.canvasData,\n          containerData = this.containerData,\n          cropBoxData = this.cropBoxData,\n          pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n          top = cropBoxData.top,\n          width = cropBoxData.width,\n          height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset; // Locking aspect ratio in \"free mode\" by holding shift key\n\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n\n            break;\n\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n\n            break;\n\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n\n            break;\n\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n\n            break;\n        }\n      };\n\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n        // Resize crop box\n\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_EAST);\n          width += range.x;\n\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n\n          break;\n\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n\n          check(ACTION_SOUTH);\n          height += range.y;\n\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n\n          break;\n\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n\n          break;\n        // Move canvas\n\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n        // Zoom canvas\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n        // Create crop box\n\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n\n          if (range.y < 0) {\n            top -= height;\n          } // Show the crop box if is hidden\n\n\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n\n          break;\n      }\n\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true); // Render canvas after crop box rendered\n\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n\n      return this;\n    },\n\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n\n      return this;\n    },\n\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      element[NAMESPACE] = undefined;\n\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n\n      this.uncreate();\n      return this;\n    },\n\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n          left = _this$canvasData.left,\n          top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n          canvasData = this.canvasData;\n      var width = canvasData.width,\n          height = canvasData.height,\n          naturalWidth = canvasData.naturalWidth,\n          naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData,\n          cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n          imageData = this.imageData,\n          canvasData = this.canvasData;\n      var cropBoxData = {};\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n\n        var ratio = imageData.width / imageData.naturalWidth;\n\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n\n        this.setCropBoxData(cropBoxData);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n\n      return data;\n    },\n\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n\n        this.renderCanvas(true);\n      }\n\n      return this;\n    },\n\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n\n      return data || {};\n    },\n\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n\n        this.renderCropBox();\n      }\n\n      return this;\n    },\n\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options); // Returns the source canvas if it is not cropped.\n\n      if (!this.cropped) {\n        return source;\n      }\n\n      var _this$getData = this.getData(),\n          initialX = _this$getData.x,\n          initialY = _this$getData.y,\n          initialWidth = _this$getData.width,\n          initialHeight = _this$getData.height;\n\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n\n      var _getAdjustedSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.width || (ratio !== 1 ? source.width : initialWidth),\n        height: options.height || (ratio !== 1 ? source.height : initialHeight)\n      }),\n          width = _getAdjustedSizes.width,\n          height = _getAdjustedSizes.height;\n\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n          imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n          imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      } // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n\n\n      var sourceWidth = source.width;\n      var sourceHeight = source.height; // Source canvas parameters\n\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight; // Destination canvas parameters\n\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n\n      var params = [srcX, srcY, srcWidth, srcHeight]; // Avoid \"IndexSizeError\"\n\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      } // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n\n\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n\n        if (this.ready) {\n          this.initCropBox();\n\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n          dragBox = this.dragBox,\n          face = this.face;\n\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Cropper);\n\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n\n    _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this;\n\n        if (tagName === 'img') {\n          this.isImg = true; // e.g.: \"img/picture.jpg\"\n\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url; // Stop when it's a blank image\n\n          if (!url) {\n            return;\n          } // e.g.: \"https://example.com/img/picture.jpg\"\n\n\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n\n        if (!url) {\n          return;\n        }\n\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n            options = this.options;\n\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        } // Only IE10+ supports Typed Arrays\n\n\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        } // Detect the mime type of the image directly if it is a Data URL\n\n\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n\n          return;\n        } // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n\n\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr; // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        }; // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n\n\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        } // The third parameter is required for avoiding side-effect (#682)\n\n\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n            imageData = this.imageData; // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n\n          var _parseOrientation = parseOrientation(orientation);\n\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n            url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          } // Bust cache when there is not a \"crossOrigin\" property (#519)\n\n\n          crossOriginUrl = addTimestamp(url);\n        }\n\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true; // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n\n          _this2.build();\n        }; // Most modern browsers (excepts iOS WebKit)\n\n\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n\n        sizingImage.src = image.src; // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options,\n            image = this.image; // Create cropper elements\n\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image); // Hide the original image\n\n        addClass(element, CLASS_HIDDEN); // Inserts the cropper after to the current image\n\n        container.insertBefore(cropper, element.nextSibling); // Show the image if is hidden\n\n        if (!this.isImg) {\n          removeClass(image, CLASS_HIDE);\n        }\n\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n\n        if (options.autoCrop) {\n          this.crop();\n        }\n\n        this.setData(options.data);\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        this.cropper.parentNode.removeChild(this.cropper);\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Cropper;\n  }();\n\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n})));\n"]},"banner":"For license information please see 18.0fc96213.chunk.js.LICENSE.txt","extractedComments":"/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:17.411Z\n */\n","commentsFilename":"static/js/18.0fc96213.chunk.js.LICENSE.txt"}